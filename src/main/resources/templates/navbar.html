<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Navbar UI</title>
</head>

<body>
    <!-- Target Fragment named 'navbar' for easy inclusion in other templates -->
    <nav th:fragment="navbar" class="rt-navbar">
        <!-- Load Font inside fragment so it's always included -->
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
            rel="stylesheet">

        <style>
            /* Base Theme Variables fallback (in case home.html vars are not loaded) */
            :root {
                --rt-nav-bg: #0a0a0a;
                --rt-nav-border: #27272a;
                --rt-text-primary: #ffffff;
                --rt-text-secondary: #a1a1aa;
                --rt-accent: #f40000;
                --rt-accent-hover: #cc0000;
                --rt-btn-bg: transparent;
                --rt-btn-hover: #1f1f1f;
            }

            [data-theme="light"] {
                --rt-nav-bg: #ffffff;
                --rt-nav-border: #e2e8f0;
                --rt-text-primary: #0f172a;
                --rt-text-secondary: #64748b;
                --rt-btn-hover: #f1f5f9;
            }

            /* Navbar Specific Styles */
            .rt-navbar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0 40px;
                height: 72px;
                background-color: var(--rt-nav-bg);
                border-bottom: 1px solid var(--rt-nav-border);
                position: sticky;
                top: 0;
                z-index: 1000;
                font-family: 'Poppins', sans-serif;
                transition: background-color 0.3s ease, border-color 0.3s ease;
            }

            /* Left: Logo */
            .rt-brand {
                display: flex;
                align-items: center;
                gap: 12px;
                text-decoration: none;
                color: var(--rt-text-primary);
                font-weight: 700;
                font-size: 1.25rem;
                letter-spacing: -0.5px;
                transition: opacity 0.2s ease;
            }

            .rt-brand:hover {
                opacity: 0.9;
            }

            .rt-brand-icon {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 32px;
                height: 32px;
                background-color: var(--rt-accent);
                border-radius: 8px;
                color: white;
            }

            /* Middle/Right: Links */
            .rt-nav-menu {
                display: flex;
                align-items: center;
                gap: 32px;
                list-style: none;
                margin: 0;
                padding: 0;
            }

            .rt-nav-link {
                text-decoration: none;
                color: var(--rt-text-secondary);
                font-weight: 500;
                font-size: 0.95rem;
                display: flex;
                align-items: center;
                gap: 8px;
                transition: color 0.2s ease;
                padding: 24px 0;
                /* Full height click area */
                position: relative;
            }

            .rt-nav-link:hover {
                color: var(--rt-text-primary);
            }

            .rt-nav-link svg {
                opacity: 0.8;
                transition: color 0.2s ease;
            }

            .rt-nav-link:hover svg {
                color: var(--rt-accent);
                opacity: 1;
            }

            /* Right: Actions */
            .rt-nav-controls {
                display: flex;
                align-items: center;
                gap: 16px;
            }

            /* Theme Toggle */
            .rt-theme-btn {
                background: var(--rt-btn-bg);
                border: 1px solid var(--rt-nav-border);
                color: var(--rt-text-secondary);
                cursor: pointer;
                width: 40px;
                height: 40px;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s ease;
            }

            .rt-theme-btn:hover {
                background: var(--rt-btn-hover);
                color: var(--rt-text-primary);
                border-color: var(--rt-text-secondary);
            }

            /* Conditional Icon Rendering */
            .icon-sun {
                display: none;
            }

            .icon-moon {
                display: block;
            }

            [data-theme="dark"] .icon-sun {
                display: block;
            }

            [data-theme="dark"] .icon-moon {
                display: none;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .rt-nav-menu {
                    display: none;
                }

                .rt-navbar {
                    padding: 0 20px;
                }
            }
        </style>

        <!-- Left: Logo -->
        <a href="/" class="rt-brand">
            <div class="rt-brand-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z" />
                </svg>
            </div>
            <span>YouTube Tools</span>
        </a>

        <!-- Middle: Links -->
        <ul class="rt-nav-menu">
            <li class="rt-nav-item">
                <a href="/seo-tags" class="rt-nav-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                        <line x1="7" y1="7" x2="7.01" y2="7"></line>
                    </svg>
                    SEO Tags
                </a>
            </li>
            <li class="rt-nav-item">
                <a href="/thumbnails" class="rt-nav-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    Thumbnails
                </a>
            </li>
            <li class="rt-nav-item">
                <a href="/video-details" class="rt-nav-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="8" y1="6" x2="21" y2="6"></line>
                        <line x1="8" y1="12" x2="21" y2="12"></line>
                        <line x1="8" y1="18" x2="21" y2="18"></line>
                        <line x1="3" y1="6" x2="3.01" y2="6"></line>
                        <line x1="3" y1="12" x2="3.01" y2="12"></line>
                        <line x1="3" y1="18" x2="3.01" y2="18"></line>
                    </svg>
                    Video Data
                </a>
            </li>
            <li class="rt-nav-item">
                <a href="/ai-thumbnail" class="rt-nav-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <!-- AI / Magic Image Icon -->
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <path d="M21 15l-5-5L5 21"></path>
                        <path d="M12 2v4M12 18v4M4 12H0M24 12h-4"></path> <!-- Magic spark extensions -->
                    </svg>
                    AI Generator
                </a>
            </li>
        </ul>

        <!-- Right: Actions -->
        <div class="rt-nav-controls">
            <button class="rt-theme-btn" id="themeToggleBtn" aria-label="Toggle Dark Mode">
                <!-- Sun Icon for Dark Mode (Click to switch to Light) -->
                <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <!-- Moon Icon for Light Mode (Click to switch to Dark) -->
                <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </div>

        <script>
            // Ensure this script only runs once even if fragment is included multiple times (unlikely, but safe)
            if (!window.themeToggleInitialized) {
                window.themeToggleInitialized = true;

                document.addEventListener("DOMContentLoaded", () => {
                    const themeBtn = document.getElementById('themeToggleBtn');
                    if (!themeBtn) return;

                    // Set initial theme based on localStorage or system pref
                    const savedTheme = localStorage.getItem('theme');
                    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                    if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
                        document.documentElement.setAttribute('data-theme', 'dark');
                    } else {
                        document.documentElement.setAttribute('data-theme', 'light');
                    }

                    // Toggle logic
                    themeBtn.addEventListener('click', () => {
                        const currentTheme = document.documentElement.getAttribute('data-theme');
                        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

                        document.documentElement.setAttribute('data-theme', newTheme);
                        localStorage.setItem('theme', newTheme);
                    });
                });
            }
        </script>
    </nav>
</body>

</html>